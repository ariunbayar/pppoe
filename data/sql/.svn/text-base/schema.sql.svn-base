CREATE TABLE bandwidth (id INT AUTO_INCREMENT, bandwidth INT NOT NULL, ipaddress VARCHAR(15) DEFAULT '' NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE change_log (id BIGINT AUTO_INCREMENT, object_id BIGINT, object VARCHAR(50), description TEXT, editor_id BIGINT, created_at DATETIME NOT NULL, INDEX object_id_idx (object_id), INDEX editor_id_idx (editor_id), PRIMARY KEY(id)) ENGINE = MYISAM;
CREATE TABLE config (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, value VARCHAR(255), PRIMARY KEY(id)) ENGINE = MYISAM;
CREATE TABLE customer (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, district_id BIGINT NOT NULL, bair VARCHAR(50) NOT NULL, toot VARCHAR(50) NOT NULL, username VARCHAR(255) NOT NULL UNIQUE, password VARCHAR(255) NOT NULL, bandwidth_id BIGINT NOT NULL, description TEXT, payment BIGINT DEFAULT 0 NOT NULL, is_blocked TINYINT(1) DEFAULT '0' NOT NULL, user_id BIGINT NOT NULL, next_action VARCHAR(50), next_date datetime, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX district_id_idx (district_id), INDEX bandwidth_id_idx (bandwidth_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = MYISAM;
CREATE TABLE district (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, PRIMARY KEY(id)) ENGINE = MYISAM;
CREATE TABLE nas (id INT AUTO_INCREMENT, nasname VARCHAR(128) NOT NULL, shortname VARCHAR(32), type VARCHAR(30) DEFAULT 'other', ports INT, secret VARCHAR(60) DEFAULT 'secret' NOT NULL, community VARCHAR(50), description VARCHAR(200) DEFAULT 'RADIUS Client', PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE next_action (id BIGINT AUTO_INCREMENT, customer_id BIGINT NOT NULL, action VARCHAR(50) NOT NULL, date datetime NOT NULL, INDEX customer_id_idx (customer_id), PRIMARY KEY(id)) ENGINE = MYISAM;
CREATE TABLE phone (id BIGINT AUTO_INCREMENT, customer_id BIGINT NOT NULL, description VARCHAR(50), INDEX customer_id_idx (customer_id), PRIMARY KEY(id)) ENGINE = MYISAM;
CREATE TABLE radacct (radacctid BIGINT AUTO_INCREMENT, acctsessionid VARCHAR(32) DEFAULT '' NOT NULL, acctuniqueid VARCHAR(32) DEFAULT '' NOT NULL, username VARCHAR(64) DEFAULT '' NOT NULL, realm VARCHAR(64) DEFAULT NULL, nasipaddress VARCHAR(15) DEFAULT '' NOT NULL, nasportid VARCHAR(15), nasporttype VARCHAR(32), acctstarttime DATETIME DEFAULT '0000-00-00 00:00:00' NOT NULL, acctstoptime DATETIME DEFAULT '0000-00-00 00:00:00' NOT NULL, acctsessiontime INT, acctauthentic VARCHAR(32), connectinfo_start VARCHAR(50), connectinfo_stop VARCHAR(50), acctinputoctets BIGINT, acctoutputoctets BIGINT, calledstationid VARCHAR(50) DEFAULT '' NOT NULL, callingstationid VARCHAR(50) DEFAULT '' NOT NULL, acctterminatecause VARCHAR(32) DEFAULT '' NOT NULL, servicetype VARCHAR(32), framedprotocol VARCHAR(32), framedipaddress VARCHAR(15) DEFAULT '' NOT NULL, acctstartdelay INT, acctstopdelay INT, xascendsessionsvrkey VARCHAR(10), processed TINYINT(1) DEFAULT '0' NOT NULL, PRIMARY KEY(radacctid)) ENGINE = INNODB;
CREATE TABLE radcheck (id INT UNSIGNED AUTO_INCREMENT, username VARCHAR(64) DEFAULT '' NOT NULL, attr VARCHAR(32) DEFAULT '' NOT NULL, op CHAR(2) DEFAULT '==' NOT NULL, value VARCHAR(253) DEFAULT '' NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE radgroupcheck (id INT UNSIGNED AUTO_INCREMENT, groupname VARCHAR(64) DEFAULT '' NOT NULL, attr VARCHAR(32) DEFAULT '' NOT NULL, op CHAR(2) DEFAULT '==' NOT NULL, value VARCHAR(253) DEFAULT '' NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE radgroupreply (id INT UNSIGNED AUTO_INCREMENT, groupname VARCHAR(64) DEFAULT '' NOT NULL, attr VARCHAR(32) DEFAULT '' NOT NULL, op CHAR(2) DEFAULT '=' NOT NULL, value VARCHAR(253) DEFAULT '' NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE radippool (id INT UNSIGNED AUTO_INCREMENT, pool_name VARCHAR(30) NOT NULL, framedipaddress VARCHAR(15) DEFAULT '' NOT NULL, nasipaddress VARCHAR(15) DEFAULT '' NOT NULL, calledstationid VARCHAR(30) NOT NULL, callingstationid VARCHAR(30) NOT NULL, expiry_time DATETIME DEFAULT '0000-00-00 00:00:00' NOT NULL, username VARCHAR(64) DEFAULT '' NOT NULL, pool_key VARCHAR(30) NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE radpostauth (id INT AUTO_INCREMENT, username VARCHAR(64) DEFAULT '' NOT NULL, pass VARCHAR(64) DEFAULT '' NOT NULL, reply VARCHAR(32) DEFAULT '' NOT NULL, authdate DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE radreply (id INT UNSIGNED AUTO_INCREMENT, username VARCHAR(64) DEFAULT '' NOT NULL, attr VARCHAR(32) DEFAULT '' NOT NULL, op CHAR(2) DEFAULT '=' NOT NULL, value VARCHAR(253) DEFAULT '' NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE radusergroup (id INT AUTO_INCREMENT, username VARCHAR(64) DEFAULT '' NOT NULL, groupname VARCHAR(64) DEFAULT '' NOT NULL, priority INT DEFAULT '1' NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE total_usage (id BIGINT AUTO_INCREMENT, count BIGINT DEFAULT 0, input_bits BIGINT DEFAULT 0, output_bits BIGINT DEFAULT 0, created_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = MYISAM;
CREATE TABLE user (id BIGINT AUTO_INCREMENT, username VARCHAR(255) NOT NULL UNIQUE, password VARCHAR(255) NOT NULL, role TEXT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = MYISAM;
ALTER TABLE change_log ADD CONSTRAINT change_log_object_id_user_id FOREIGN KEY (object_id) REFERENCES user(id);
ALTER TABLE change_log ADD CONSTRAINT change_log_object_id_district_id FOREIGN KEY (object_id) REFERENCES district(id);
ALTER TABLE change_log ADD CONSTRAINT change_log_object_id_customer_id FOREIGN KEY (object_id) REFERENCES customer(id);
ALTER TABLE change_log ADD CONSTRAINT change_log_editor_id_user_id FOREIGN KEY (editor_id) REFERENCES user(id);
ALTER TABLE customer ADD CONSTRAINT customer_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE customer ADD CONSTRAINT customer_district_id_district_id FOREIGN KEY (district_id) REFERENCES district(id);
ALTER TABLE customer ADD CONSTRAINT customer_bandwidth_id_bandwidth_id FOREIGN KEY (bandwidth_id) REFERENCES bandwidth(id);
ALTER TABLE next_action ADD CONSTRAINT next_action_customer_id_customer_id FOREIGN KEY (customer_id) REFERENCES customer(id);
ALTER TABLE phone ADD CONSTRAINT phone_customer_id_customer_id FOREIGN KEY (customer_id) REFERENCES customer(id);
